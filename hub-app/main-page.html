<link rel="import" href="side-menu.html">
<link rel="import" href="settings-page.html">
<link rel="import" href="device-list.html">
<link rel="import" href="../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/core-menu/core-menu.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<polymer-element name="main-page" attributes="user app hosts device" vertical layout auto>
  <template>

    <link rel="stylesheet" href="main-page.css">

    <core-drawer-panel id="drawerPanel">

      <side-menu drawer user="{{user}}" selected="{{menuSelected}}" heading="{{heading}}"></side-menu>

      <core-header-panel main>

        <core-toolbar id="mainheader">
          <paper-icon-button icon="menu" core-drawer-toggle></paper-icon-button>
          <span flex>{{heading}}</span>
        </core-toolbar>

        <div class="content" fit vertical layout>

          <core-animated-pages selected="{{menuSelected}}" on-core-select="{{selectContent}}" flex>

            <device-list name="devices" user="{{user}}" device="{{device}}"></device-list>

            <section name="groups">Groups content</section>

            <settings-page name="settings" id="settings" hosts="{{hosts}}"></settings-page>

          </core-animated-pages>

        </div>

      </core-header-panel>

    </core-drawer-panel>

  </template>
  <script>
    Polymer('main-page', {

      menuSelectedChanged: function () {
        this.device = null;
        this.$.drawerPanel.togglePanel();
      },

      selectContent: function () {
        if(this.menuSelected === 'settings'){
          this.$.settings.fire('reset');
        }
      }

    });
  </script>
</polymer-element>
